<?xml version="1.0" ?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
    <xacro:macro name="rv5as" params="parent prefix *origin">
        <material name="melfa_white">
            <color rgba="0.9176 0.9083 0.9035 1.0"/>
        </material>
        <material name="table_white">
            <color rgba="0.9694 0.9647 0.9647 1.0"/>
        </material>
        <material name="schrunk_bracket_black">
            <color rgba="0.1 0.1 0.1 1.0"/>
        </material>
        <material name="schrunk_blue">
            <color rgba="0.1608 0.2667 0.4824 1.0"/>
        </material>
        <material name="crate_green">
            <color rgba="0.1176 0.6706 0.5373 1.0"/>
        </material>
        <material name="crate_grey">
            <color rgba="0.5 0.5 0.5 1.0"/>
        </material>
        <material name="realsense_alum">
            <color rgba="0.4392 0.4392 0.4392 1.0"/>
        </material>
        <joint name="Mate1" type="fixed">
            <origin xyz="0 0 0" rpy="0 -0 0" />
            <parent link="${parent}" />
            <child link="rv5as_base" />
        </joint>
        <joint name="rv5as_camera_tcp_joint" type="fixed">
            <origin xyz="0 0.0175 0" rpy="0 0 0" />
            <parent link="rv5as_camera" />
            <child link="rv5as_camera_tcp" />
        </joint>
        <joint name="rv5as_default_tcp_joint" type="fixed">
            <origin xyz="0 0 0.15105" rpy="0 -0 0" />
            <parent link="rv5as_schrunk_assista" />
            <child link="rv5as_default_tcp" />
        </joint>
        <joint name="rv5as_joint_1" type="revolute">
            <axis xyz="0 0 1" />
            <limit effort="1" velocity="2.16421" lower="-4.18879" upper="4.18879" />
            <origin xyz="0 0 0" rpy="0 0 0" />       
            <parent link="rv5as_base" />
            <child link="rv5as_shoulder" />
        </joint>
        <joint name="rv5as_joint_2" type="revolute">
            <axis xyz="0 1 0" />
            <limit effort="1" velocity="2.16421" lower="-2.58309" upper="2.58309" />
            <origin xyz="0 0 0.254" rpy="0 0 0" />    
            <parent link="rv5as_shoulder" />
            <child link="rv5as_upper_arm" />
        </joint>
        <joint name="rv5as_joint_3" type="revolute">
            <axis xyz="0 1 0" />
            <limit effort="1" velocity="2.16421" lower="-2.61799" upper="2.61799" />
            <origin xyz="0 0 0.41" rpy="0 0 0" />
            <parent link="rv5as_upper_arm" />
            <child link="rv5as_elbow" />
        </joint>
        <joint name="rv5as_joint_4" type="revolute">
            <axis xyz="0 0 1" />
            <limit effort="1" velocity="3.4383" lower="-3.49066" upper="3.49066" />
            <origin xyz="0 0 0" rpy="0 0 0" />   
            <parent link="rv5as_elbow" />
            <child link="rv5as_forearm" />
        </joint>
        <joint name="rv5as_joint_5" type="revolute">
            <axis xyz="0 1 0" />
            <limit effort="1" velocity="6.21337" lower="-2.0944" upper="2.0944" />
            <origin xyz="0 0 0.5" rpy="0 0 0" />    
            <parent link="rv5as_forearm" />
            <child link="rv5as_wrist" />
        </joint>
        <joint name="rv5as_joint_6" type="revolute">
            <axis xyz="0 0 1" />
            <limit effort="1" velocity="6.28318" lower="-3.49066" upper="3.49066" />
            <origin xyz="0 0 0.125" rpy="0 0 0" /> 
            <parent link="rv5as_wrist" />
            <child link="rv5as_hand_flange" />
        </joint>
        <!-- Add the joint to connect the rv5as_table_base_joint to the rv5as_base -->
        <joint name="rv5as_table_base_joint" type="fixed">
            <parent link="rv5as_base"/>
            <child link="rv5as_table_base"/>
            <origin rpy="0 0 0" xyz="0 0 0"/>
        </joint>
        <!-- Add the joint to connect the schrunk_assista_bracket to the hand flange -->
        <joint name="rv5as_schrunk_assista_bracket_joint" type="fixed">
            <parent link="rv5as_hand_flange"/>
            <child link="rv5as_schrunk_assista_bracket"/>
            <origin rpy="0 0 0" xyz="0 0 0"/>
        </joint>
        <!-- Add the joint to connect the schrunk_assista to the rv5as_schrunk_assista_bracket -->
        <joint name="rv5as_schrunk_assista_joint" type="fixed">
            <parent link="rv5as_schrunk_assista_bracket"/>
            <child link="rv5as_schrunk_assista"/>
            <origin rpy="0 0 0" xyz="0 0 0.0201"/>
        </joint>
        <!-- Add the joint to connect the camera to the rv5as_schrunk_assista_bracket -->
        <joint name="rv5as_camera_joint" type="fixed">
            <parent link="rv5as_schrunk_assista_bracket"/>
            <child link="rv5as_camera"/>
            <origin rpy="0 -1.0122909662 0" xyz="0.048826 0 0.078148"/>
        </joint>
        <!-- Add the joint to connect the crate to the rv5as_table_base -->
        <joint name="crate_joint" type="fixed">
            <parent link="rv5as_table_base"/>
            <child link="crate"/>
            <origin rpy="0 0 0" xyz="0 0.539 -0.063"/>
        </joint>
        <!-- Add the joint to connect the crate_foam to crate -->
        <joint name="crate_foam_joint" type="fixed">
            <parent link="crate"/>
            <child link="crate_foam"/>
            <origin rpy="0 0 0" xyz="0 0 0"/>
        </joint>
        <!-- Add the joint to connect the crate_inner_bottom_center to crate -->
        <joint name="crate_inner_bottom_center_joint" type="fixed">
            <parent link="crate"/>
            <child link="crate_inner_bottom_center"/>
            <origin rpy="3.14159 1.5708 4.7124" xyz="0 0 -0.143"/>
        </joint>
        <link name="rv5as_base">
            <visual>
                <material name="melfa_white"/>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/rv5as/base.STL" />
                </geometry>
                <origin rpy="0.00 0.00 0.00" xyz="0.00 0.00 0.00"/>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/rv5as/base.STL" />
                </geometry>
                <origin rpy="0.00 0.00 0.00" xyz="0.00 0.00 0.00"/>
            </collision>
        </link>
        <link name="rv5as_camera_tcp" />
        <link name="rv5as_default_tcp" />
        <link name="rv5as_elbow">
            <visual>
                <material name="melfa_white"/>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/rv5as/elbow.STL" />
                </geometry>
                <origin rpy="0.00 0.00 0.00" xyz="0.00 0.00 0.00"/>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/rv5as/elbow.STL" />
                </geometry>
                <origin rpy="0.00 0.00 0.00" xyz="0.00 0.00 0.00"/>
            </collision>
        </link>
        <link name="rv5as_forearm">
            <visual>
                <material name="melfa_white"/>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/rv5as/forearm.STL" />
                </geometry>
                <origin rpy="0.00 0.00 0.00" xyz="0.00 0.00 0.00"/>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/rv5as/forearm.STL" />
                </geometry>
                <origin rpy="0.00 0.00 0.00" xyz="0.00 0.00 0.00"/>
            </collision>
        </link>
        <link name="rv5as_hand_flange">
            <visual>
                <material name="melfa_white"/>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/rv5as/hand_flange.STL" />
                </geometry>
                <origin rpy="0.00 0.00 0.00" xyz="0.00 0.00 0.00"/>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/rv5as/hand_flange.STL" />
                </geometry>
                <origin rpy="0.00 0.00 0.00" xyz="0.00 0.00 0.00"/>
            </collision>
        </link>
        <link name="rv5as_shoulder">
            <visual>
                <material name="melfa_white"/>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/rv5as/shoulder.STL" />
                </geometry>
                <origin rpy="0.00 0.00 0" xyz="0.00 0.00 0.00"/>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/rv5as/shoulder.STL" />
                </geometry>
                <origin rpy="0.00 0.00 0" xyz="0.00 0.00 0.00"/>
            </collision>
        </link>
        <link name="rv5as_upper_arm">
            <visual>
                <material name="melfa_white"/>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/rv5as/upper_arm.STL" />
                </geometry>
                <origin rpy="0.00 0.00 0.00" xyz="0.00 0.00 0.00"/>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/rv5as/upper_arm.STL" />
                </geometry>
                <origin rpy="0.00 0.00 0.00" xyz="0.00 0.00 0.00"/>
            </collision>
        </link>
        <link name="rv5as_wrist">
            <visual>
                <material name="melfa_white"/>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/rv5as/wrist.STL" />
                </geometry>
                <origin rpy="0.00 0.00 0.00" xyz="0.00 0.00 0.00"/>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/rv5as/wrist.STL" />
                </geometry>
                <origin rpy="0.00 0.00 0.00" xyz="0.00 0.00 0.00"/>
            </collision>
        </link>
        <!-- Add the table base link -->
        <link name="rv5as_table_base">
            <visual>
                <material name="melfa_white"/>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/custom/table_base.stl"/>
                </geometry>
                <origin rpy="0 0 0" xyz="0 0 0"/>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/custom/table_base.stl"/>
                </geometry>
                <origin rpy="0 0 0" xyz="0 0 0"/>
            </collision>
        </link>
        <!-- Add the schrunk_assista_bracket link -->
        <link name="rv5as_schrunk_assista_bracket">
            <visual>
                <material name="schrunk_bracket_black"/>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/custom/schrunk_assista/schrunk_assista_bracket.stl"/>
                </geometry>
                <origin rpy="0 0 0" xyz="0 0 0"/>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/custom/schrunk_assista/schrunk_assista_bracket.stl"/>
                </geometry>
                <origin rpy="0 0 0" xyz="0 0 0"/>
            </collision>
        </link>
        <!-- Add the schrunk_assista link -->
        <link name="rv5as_schrunk_assista">
            <visual>
                <material name="schrunk_blue"/>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/custom/schrunk_assista/schrunk_assista.stl"/>
                </geometry>
                <origin rpy="0 0 0" xyz="0 0 0"/>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/custom/schrunk_assista/schrunk_assista.stl"/>
                </geometry>
                <origin rpy="0 0 0" xyz="0 0 0"/>
            </collision>
        </link>
        <!-- Add the camera link -->
        <link name="rv5as_camera">
            <visual>
                <material name="realsense_alum"/>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/custom/realsense_d435.stl"/>
                </geometry>
                <origin rpy="0 0 0" xyz="0 0 0 "/>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/custom/realsense_d435.stl"/>
                </geometry>
                <origin rpy="0 0 0" xyz="0 0 0 "/>
            </collision>
        </link>
        <!-- Add the crate link -->
        <link name="crate">
            <visual>
                <material name="crate_green"/>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/custom/crate.stl"/>
                </geometry>
                <origin rpy="0 0 0" xyz="0 0 0"/>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/custom/crate_collision.stl"/>
                </geometry>
                <origin rpy="0 0 0" xyz="0 0 0"/>
            </collision>
        </link>
        <!-- Add the crate_foam link -->
        <link name="crate_foam">
            <visual>
                <material name="crate_grey"/>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/custom/crate_foam.stl"/>
                </geometry>
                <origin rpy="0 0 0" xyz="0 0 0"/>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="package://melfa_description/meshes/custom/crate_foam.stl"/>
                </geometry>
                <origin rpy="0 0 0" xyz="0 0 0"/>
            </collision>
        </link>
        <!-- Add the crate inner bottom center link -->
        <link name="crate_inner_bottom_center" />
    </xacro:macro>
</robot>